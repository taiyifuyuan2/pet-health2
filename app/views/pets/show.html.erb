<!-- ペットヘッダー -->
<div class="pet-header">
  <div class="pet-info">
    <div class="pet-avatar-large">
      <img src="<%= @pet.profile_image_url %>" alt="<%= @pet.name %>の写真" class="pet-avatar-image">
    </div>
    <div class="pet-details">
      <h1 class="pet-name"><%= @pet.name %></h1>
      <div class="pet-basic-info">
        <div class="pet-info-item">
          <span class="info-icon">🐕</span>
          <%= @pet.species %>
        </div>
        <% if @pet.sex.present? %>
          <div class="pet-info-item">
            <span class="info-icon">⚥</span>
            <%= @pet.sex %>
          </div>
        <% end %>
        <% if @pet.birthdate.present? %>
          <div class="pet-info-item">
            <span class="info-icon">🎂</span>
            <%= @pet.birthdate.strftime('%Y年%m月%d日') %>
          </div>
        <% end %>
        <% if @pet.breed.present? %>
          <div class="pet-info-item">
            <span class="info-icon">🐕</span>
            <%= @pet.breed.name %>
          </div>
        <% end %>
        <% if @pet.weight_kg.present? %>
          <div class="pet-info-item">
            <span class="info-icon">⚖️</span>
            <%= @pet.weight_kg %>kg
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="pet-actions">
    <%= link_to "編集", edit_pet_path(@pet), class: "btn btn-secondary" %>
    <%= link_to "削除", @pet, data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, 
                class: "btn btn-danger" %>
  </div>
</div>

<!-- 統計カード -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon">📅</div>
    <div class="stat-content">
      <div class="stat-number"><%= @events.count %></div>
      <div class="stat-label">関連予定</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon">✅</div>
    <div class="stat-content">
      <div class="stat-number"><%= @events.completed.count %></div>
      <div class="stat-label">完了済み</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon">⏳</div>
    <div class="stat-content">
      <div class="stat-number"><%= @events.pending.count %></div>
      <div class="stat-label">未完了</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon">
      <%= image_tag "icons/house.jpeg", alt: "世帯", class: "icon" %>
    </div>
    <div class="stat-content">
      <div class="stat-number">1</div>
      <div class="stat-label">所属世帯</div>
    </div>
  </div>
</div>

<!-- メインコンテンツ -->
<div class="pet-detail-grid">
  <!-- ペット詳細情報 -->
  <div class="pet-detail-card">
    <div class="card-header">
      <h2 class="card-title">📋 詳細情報</h2>
    </div>
    <div class="pet-detail-content">
      <div class="detail-section">
        <h3 class="detail-section-title">基本情報</h3>
        <div class="detail-items">
          <div class="detail-item">
            <div class="detail-icon">🐕</div>
            <div class="detail-content">
              <div class="detail-label">種類</div>
              <div class="detail-value"><%= @pet.species %></div>
            </div>
          </div>
          <% if @pet.sex.present? %>
            <div class="detail-item">
              <div class="detail-icon">⚥</div>
              <div class="detail-content">
                <div class="detail-label">性別</div>
                <div class="detail-value"><%= @pet.sex %></div>
              </div>
            </div>
          <% end %>
          <% if @pet.birthdate.present? %>
            <div class="detail-item">
              <div class="detail-icon">🎂</div>
              <div class="detail-content">
                <div class="detail-label">誕生日</div>
                <div class="detail-value"><%= @pet.birthdate.strftime('%Y年%m月%d日') %></div>
              </div>
            </div>
          <% end %>
          <% if @pet.breed.present? %>
            <div class="detail-item">
              <div class="detail-icon">🐕</div>
              <div class="detail-content">
                <div class="detail-label">犬種</div>
                <div class="detail-value"><%= @pet.breed.name %></div>
              </div>
            </div>
          <% end %>
          <% if @pet.weight_kg.present? %>
            <div class="detail-item">
              <div class="detail-icon">⚖️</div>
              <div class="detail-content">
                <div class="detail-label">体重</div>
                <div class="detail-value"><%= @pet.weight_kg %>kg</div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
      
      <% if @pet.notes.present? %>
        <div class="detail-section">
          <h3 class="detail-section-title">メモ</h3>
          <div class="pet-notes">
            <p><%= @pet.notes %></p>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- 今日の予定 -->
  <div class="pet-detail-card">
    <div class="card-header">
      <h2 class="card-title">📅 今日の予定</h2>
    </div>
    <div class="schedule-content">
      <% if @todays_schedule.any? %>
        <% @todays_schedule.each do |vaccination| %>
          <div class="schedule-item vaccination-item">
            <div class="schedule-content">
              <div class="schedule-header">
                <h4 class="schedule-title">ワクチン接種: <%= vaccination.vaccine.name %></h4>
                <span class="schedule-status pending">予定</span>
              </div>
              <div class="schedule-details">
                <div class="schedule-datetime">
                  <span class="date-icon">📅</span>
                  <%= vaccination.due_on.strftime("%m月%d日") %>
                </div>
                <div class="schedule-description">
                  <%= vaccination.vaccine.description %>
                </div>
              </div>
            </div>
            <div class="schedule-actions">
              <%= link_to "完了", "#", class: "btn btn-sm btn-success" %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="empty-state">
          <div class="empty-icon">✅</div>
          <p>今日の予定はありません</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- 今週の予定 -->
  <div class="pet-detail-card">
    <div class="card-header">
      <h2 class="card-title">📅 今週の予定</h2>
    </div>
    <div class="schedule-content">
      <% if @this_weeks_schedule.any? %>
        <% @this_weeks_schedule.each do |vaccination| %>
          <div class="schedule-item vaccination-item">
            <div class="schedule-content">
              <div class="schedule-header">
                <h4 class="schedule-title">ワクチン接種: <%= vaccination.vaccine.name %></h4>
                <span class="schedule-status pending">予定</span>
              </div>
              <div class="schedule-details">
                <div class="schedule-datetime">
                  <span class="date-icon">📅</span>
                  <%= vaccination.due_on.strftime("%m月%d日") %>
                </div>
                <div class="schedule-description">
                  <%= vaccination.vaccine.description %>
                </div>
              </div>
            </div>
            <div class="schedule-actions">
              <%= link_to "詳細", "#", class: "btn btn-sm btn-secondary" %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="empty-state">
          <div class="empty-icon">📅</div>
          <p>今週の予定はありません</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- 健康アドバイス -->
  <div class="pet-detail-card">
    <div class="card-header">
      <h2 class="card-title">💡 健康アドバイス</h2>
    </div>
    <div class="advice-content">
      <% if @todays_advice.any? %>
        <% @todays_advice.each do |advice| %>
          <div class="advice-item advice-<%= advice[:priority] %>">
            <div class="advice-header">
              <h4 class="advice-title"><%= advice[:title] %></h4>
              <span class="advice-priority <%= advice[:priority] %>">
                <%= advice[:priority] == 'high' ? '重要' : '注意' %>
              </span>
            </div>
            <div class="advice-message">
              <%= advice[:message] %>
            </div>
            <div class="advice-category">
              <span class="category-tag"><%= advice[:category] %></span>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="empty-state">
          <div class="empty-icon">💡</div>
          <p>今日の特別なアドバイスはありません</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- クイックアクション -->
  <div class="pet-detail-card quick-actions-section">
    <div class="card-header">
      <h2 class="card-title">⚡ クイックアクション</h2>
    </div>
    <div class="quick-actions-grid">
      <%= link_to pets_path, class: "quick-action-card" do %>
        <div class="action-icon">🐾</div>
        <div class="action-content">
          <div class="action-title">ペット一覧</div>
          <div class="action-subtitle">すべてのペットを表示</div>
        </div>
      <% end %>
      <%= link_to dashboard_path, class: "quick-action-card" do %>
        <div class="action-icon">📊</div>
        <div class="action-content">
          <div class="action-title">ダッシュボード</div>
          <div class="action-subtitle">メインページに戻る</div>
        </div>
      <% end %>
      <%= link_to new_event_path(subject_type: 'Pet', subject_id: @pet.id), class: "quick-action-card" do %>
        <div class="action-icon">📅</div>
        <div class="action-content">
          <div class="action-title">予定を追加</div>
          <div class="action-subtitle">新しい予定を作成</div>
        </div>
      <% end %>
    </div>
  </div>
</div>
